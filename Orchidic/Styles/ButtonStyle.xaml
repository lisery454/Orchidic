<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:utils="clr-namespace:Orchidic.Utils">
  <!--  WindowControlButton  -->
  <Style x:Key="WindowControlButton" TargetType="Button">
    <Setter Property="Height" Value="20" />
    <Setter Property="Width" Value="20" />
    <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True" />
    <Setter Property="ClipToBounds" Value="False" />
    <Setter Property="Focusable" Value="False" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="Button">
          <Grid x:Name="Root" RenderTransformOrigin="0.5,0.5">
            <Grid.RenderTransform>
              <ScaleTransform ScaleX="1" ScaleY="1" />
            </Grid.RenderTransform>

            <utils:SuperellipseBorder x:Name="SuperellipseBorder"
                                      Power="4"
                                      CornerRadius="8">
              <utils:SuperellipseBorder.Fill>
                <SolidColorBrush x:Name="BorderBrush"
                                 Color="{DynamicResource WindowCtrlBtnFillColor}" />
              </utils:SuperellipseBorder.Fill>

              <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center" />
            </utils:SuperellipseBorder>

            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal" />
                <VisualState x:Name="MouseOver">
                  <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BorderBrush"
                                    Storyboard.TargetProperty="Color"
                                    To="{DynamicResource WindowCtrlBtnHoverColor}"
                                    Duration="0:0:0.15" />
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Pressed">
                  <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BorderBrush"
                                    Storyboard.TargetProperty="Color"
                                    To="{DynamicResource WindowCtrlBtnPressedColor}"
                                    Duration="0:0:0.15" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                     To="0.95" Duration="0:0:0.1" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                     To="0.95" Duration="0:0:0.1" />
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Disabled">
                  <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BorderBrush"
                                    Storyboard.TargetProperty="Color"
                                    To="Gray" Duration="0:0:0" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                     To="1" Duration="0:0:0" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                     To="1" Duration="0:0:0" />
                  </Storyboard>
                </VisualState>
              </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!--  WindowCloseButton  -->
  <Style x:Key="WindowCloseButton" TargetType="Button">
    <Setter Property="Height" Value="20" />
    <Setter Property="Width" Value="20" />
    <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True" />
    <Setter Property="ClipToBounds" Value="False" />
    <Setter Property="Focusable" Value="False" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="Button">
          <Grid x:Name="Root" RenderTransformOrigin="0.5,0.5">
            <Grid.RenderTransform>
              <ScaleTransform ScaleX="1" ScaleY="1" />
            </Grid.RenderTransform>

            <utils:SuperellipseBorder x:Name="SuperellipseBorder"
                                      Power="4"
                                      CornerRadius="8">
              <utils:SuperellipseBorder.Fill>
                <SolidColorBrush x:Name="BorderBrush"
                                 Color="{DynamicResource DangerFillColor}" />
              </utils:SuperellipseBorder.Fill>

              <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center" />
            </utils:SuperellipseBorder>

            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal" />
                <VisualState x:Name="MouseOver">
                  <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BorderBrush"
                                    Storyboard.TargetProperty="Color"
                                    To="{DynamicResource DangerHoverColor}"
                                    Duration="0:0:0.15" />
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Pressed">
                  <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BorderBrush"
                                    Storyboard.TargetProperty="Color"
                                    To="{DynamicResource DangerPressedColor}"
                                    Duration="0:0:0.15" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                     To="0.95" Duration="0:0:0.1" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                     To="0.95" Duration="0:0:0.1" />
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Disabled">
                  <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BorderBrush"
                                    Storyboard.TargetProperty="Color"
                                    To="Gray" Duration="0:0:0" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                     To="1" Duration="0:0:0" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                     To="1" Duration="0:0:0" />
                  </Storyboard>
                </VisualState>
              </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>


  <BounceEase x:Key="AnimatedButtonScaleEase" EasingMode="EaseOut" />
  <ElasticEase x:Key="AnimatedButtonRotateEase" Oscillations="1" Springiness="0.5" EasingMode="EaseOut" />

  <!--  AnimatedButton  -->
  <Style x:Key="AnimatedButton" TargetType="Button">
    <!-- 移除虚线框 -->
    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="ClipToBounds" Value="False" />
    <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />
    <Setter Property="RenderTransform">
      <Setter.Value>
        <ScaleTransform ScaleX="1" ScaleY="1" />
      </Setter.Value>
    </Setter>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="Button">
          <Border x:Name="RootBorder"
                  Background="Transparent"
                  BorderBrush="Transparent"
                  BorderThickness="0" RenderTransformOrigin="0.5,0.5">
            <Border.RenderTransform>
              <TransformGroup>
                <RotateTransform CenterX="0.5" CenterY="0.5" Angle="0"></RotateTransform>
                <ScaleTransform ScaleX="1" ScaleY="1" />
              </TransformGroup>
            </Border.RenderTransform>
            <ContentPresenter HorizontalAlignment="Center"
                              VerticalAlignment="Center"
                              Content="{TemplateBinding Content}" />

            <!-- VisualStateGroups 必须放在 FrameworkElement 内 -->
            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal">
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="RootBorder"
                                     Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[1].(ScaleTransform.ScaleX)"
                                     To="1"
                                     EasingFunction="{StaticResource AnimatedButtonScaleEase}"
                                     Duration="0:0:0.05" />
                    <DoubleAnimation Storyboard.TargetName="RootBorder"
                                     Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[1].(ScaleTransform.ScaleY)"
                                     To="1"
                                     EasingFunction="{StaticResource AnimatedButtonScaleEase}"
                                     Duration="0:0:0.05" />
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="MouseOver">
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="RootBorder"
                                     Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[1].(ScaleTransform.ScaleX)"
                                     To="1"
                                     EasingFunction="{StaticResource AnimatedButtonScaleEase}"
                                     Duration="0:0:0.05" />
                    <DoubleAnimation Storyboard.TargetName="RootBorder"
                                     Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[1].(ScaleTransform.ScaleY)"
                                     To="1"
                                     EasingFunction="{StaticResource AnimatedButtonScaleEase}"
                                     Duration="0:0:0.05" />
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Pressed">
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="RootBorder"
                                     Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[1].(ScaleTransform.ScaleX)"
                                     To="0.95"
                                     EasingFunction="{StaticResource AnimatedButtonScaleEase}"
                                     Duration="0:0:0.05" />
                    <DoubleAnimation Storyboard.TargetName="RootBorder"
                                     Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[1].(ScaleTransform.ScaleY)"
                                     To="0.95"
                                     EasingFunction="{StaticResource AnimatedButtonScaleEase}"
                                     Duration="0:0:0.05" />
                  </Storyboard>
                </VisualState>
              </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
          </Border>

        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- CoverAnimatedButton -->
  <Style x:Key="CoverAnimatedButton" TargetType="Button">
    <!-- 移除虚线框 -->
    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="ClipToBounds" Value="False" />
    <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />
    <Setter Property="RenderTransform">
      <Setter.Value>
        <ScaleTransform ScaleX="1" ScaleY="1" />
      </Setter.Value>
    </Setter>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="Button">
          <Border x:Name="RootBorder"
                  Background="Transparent"
                  BorderBrush="Transparent"
                  BorderThickness="0" RenderTransformOrigin="0.5,0.5">
            <Border.RenderTransform>
              <TransformGroup>
                <RotateTransform CenterX="0.5" CenterY="0.5" Angle="0"></RotateTransform>
                <ScaleTransform ScaleX="1" ScaleY="1" />
              </TransformGroup>
            </Border.RenderTransform>
            <ContentPresenter HorizontalAlignment="Center"
                              VerticalAlignment="Center"
                              Content="{TemplateBinding Content}" />

            <!-- VisualStateGroups 必须放在 FrameworkElement 内 -->
            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal">
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="RootBorder"
                                     Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[1].(ScaleTransform.ScaleX)"
                                     To="1"
                                     EasingFunction="{StaticResource AnimatedButtonScaleEase}"
                                     Duration="0:0:0.05" />
                    <DoubleAnimation Storyboard.TargetName="RootBorder"
                                     Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[1].(ScaleTransform.ScaleY)"
                                     To="1"
                                     EasingFunction="{StaticResource AnimatedButtonScaleEase}"
                                     Duration="0:0:0.05" />
                    <!-- <DoubleAnimation Storyboard.TargetName="RootBorder" -->
                    <!--                  Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[0].(RotateTransform.Angle)" -->
                    <!--                  To="0" -->
                    <!--                  EasingFunction="{StaticResource AnimatedButtonRotateEase}" -->
                    <!--                  Duration="0:0:0.2" /> -->
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="MouseOver">
                  <Storyboard>
                    <!-- <DoubleAnimation Storyboard.TargetName="RootBorder" -->
                    <!--                  Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[1].(ScaleTransform.ScaleX)" -->
                    <!--                  To="1.01" -->
                    <!--                  EasingFunction="{StaticResource AnimatedButtonScaleEase}" -->
                    <!--                  Duration="0:0:0.05" /> -->
                    <!-- <DoubleAnimation Storyboard.TargetName="RootBorder" -->
                    <!--                  Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[1].(ScaleTransform.ScaleY)" -->
                    <!--                  To="1.01" -->
                    <!--                  EasingFunction="{StaticResource AnimatedButtonScaleEase}" -->
                    <!--                  Duration="0:0:0.05" /> -->
                    <!-- <DoubleAnimation Storyboard.TargetName="RootBorder" -->
                    <!--                  Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[0].(RotateTransform.Angle)" -->
                    <!--                  To="-0.5" -->
                    <!--                  EasingFunction="{StaticResource AnimatedButtonRotateEase}" -->
                    <!--                  Duration="0:0:0.2" /> -->
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Pressed">
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="RootBorder"
                                     Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[1].(ScaleTransform.ScaleX)"
                                     To="0.99"
                                     EasingFunction="{StaticResource AnimatedButtonScaleEase}"
                                     Duration="0:0:0.05" />
                    <DoubleAnimation Storyboard.TargetName="RootBorder"
                                     Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[1].(ScaleTransform.ScaleY)"
                                     To="0.99"
                                     EasingFunction="{StaticResource AnimatedButtonScaleEase}"
                                     Duration="0:0:0.05" />
                    <!-- <DoubleAnimation Storyboard.TargetName="RootBorder" -->
                    <!--                  Storyboard.TargetProperty="RenderTransform.(TransformGroup.Children)[0].(RotateTransform.Angle)" -->
                    <!--                  To="0.5" -->
                    <!--                  EasingFunction="{StaticResource AnimatedButtonRotateEase}" -->
                    <!--                  Duration="0:0:0.2" /> -->
                  </Storyboard>
                </VisualState>
              </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
          </Border>

        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

</ResourceDictionary>