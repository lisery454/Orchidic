<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:utils="clr-namespace:Orchidic.Utils">
  <!--  WindowControlButton  -->
  <Style x:Key="WindowControlButton" TargetType="Button">
    <Setter Property="Height" Value="20" />
    <Setter Property="Width" Value="20" />
    <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True" />
    <Setter Property="ClipToBounds" Value="False" />
    <Setter Property="Focusable" Value="False" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="Button">
          <Grid x:Name="Root" RenderTransformOrigin="0.5,0.5">
            <Grid.RenderTransform>
              <ScaleTransform ScaleX="1" ScaleY="1" />
            </Grid.RenderTransform>

            <utils:SuperellipseBorder x:Name="SuperellipseBorder"
                                      Power="4"
                                      CornerRadius="8">
              <utils:SuperellipseBorder.Fill>
                <SolidColorBrush x:Name="BorderBrush"
                                 Color="{DynamicResource WindowCtrlBtnFillColor}" />
              </utils:SuperellipseBorder.Fill>

              <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center" />
            </utils:SuperellipseBorder>

            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal" />
                <VisualState x:Name="MouseOver">
                  <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BorderBrush"
                                    Storyboard.TargetProperty="Color"
                                    To="{DynamicResource WindowCtrlBtnHoverColor}"
                                    Duration="0:0:0.15" />
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Pressed">
                  <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BorderBrush"
                                    Storyboard.TargetProperty="Color"
                                    To="{DynamicResource WindowCtrlBtnPressedColor}"
                                    Duration="0:0:0.15" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                     To="0.95" Duration="0:0:0.1" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                     To="0.95" Duration="0:0:0.1" />
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Disabled">
                  <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BorderBrush"
                                    Storyboard.TargetProperty="Color"
                                    To="Gray" Duration="0:0:0" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                     To="1" Duration="0:0:0" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                     To="1" Duration="0:0:0" />
                  </Storyboard>
                </VisualState>
              </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!--  WindowCloseButton  -->
  <Style x:Key="WindowCloseButton" TargetType="Button">
    <Setter Property="Height" Value="20" />
    <Setter Property="Width" Value="20" />
    <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True" />
    <Setter Property="ClipToBounds" Value="False" />
    <Setter Property="Focusable" Value="False" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="Button">
          <Grid x:Name="Root" RenderTransformOrigin="0.5,0.5">
            <Grid.RenderTransform>
              <ScaleTransform ScaleX="1" ScaleY="1" />
            </Grid.RenderTransform>

            <utils:SuperellipseBorder x:Name="SuperellipseBorder"
                                      Power="4"
                                      CornerRadius="8">
              <utils:SuperellipseBorder.Fill>
                <SolidColorBrush x:Name="BorderBrush"
                                 Color="{DynamicResource WindowCloseBtnFillColor}" />
              </utils:SuperellipseBorder.Fill>

              <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center" />
            </utils:SuperellipseBorder>

            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal" />
                <VisualState x:Name="MouseOver">
                  <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BorderBrush"
                                    Storyboard.TargetProperty="Color"
                                    To="{DynamicResource WindowCloseBtnHoverColor}"
                                    Duration="0:0:0.15" />
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Pressed">
                  <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BorderBrush"
                                    Storyboard.TargetProperty="Color"
                                    To="{DynamicResource WindowCloseBtnPressedColor}"
                                    Duration="0:0:0.15" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                     To="0.95" Duration="0:0:0.1" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                     To="0.95" Duration="0:0:0.1" />
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Disabled">
                  <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BorderBrush"
                                    Storyboard.TargetProperty="Color"
                                    To="Gray" Duration="0:0:0" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                     To="1" Duration="0:0:0" />
                    <DoubleAnimation Storyboard.TargetName="Root"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                     To="1" Duration="0:0:0" />
                  </Storyboard>
                </VisualState>
              </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

</ResourceDictionary>